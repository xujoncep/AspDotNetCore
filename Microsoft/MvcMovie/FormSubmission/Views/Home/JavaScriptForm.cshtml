@model FormSubmission.Models.Student

@{
    ViewData["Title"] = "Create Student";
}

<h2>Create Student</h2>

<!-- Form -->
<div id="form-container">
    <form id="studentForm">
        <div class="form-group">
            <label for="name">Name</label>
            <input type="text" id="name" class="form-control" placeholder="Enter Name" required />
        </div>

        <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" class="form-control" placeholder="Enter Email" required />
        </div>

        <br />
        <button type="submit" class="btn btn-success">Submit</button>
    </form>
</div>

<div id="response-message" class="mt-3"></div>




@* Script *@
<script type="text/javascript">
    
    document.getElementById("studentForm").addEventListener("submit", function (event) {
        event.preventDefault();
        // const fd = new FormData(studentForm);
        // console.log(fd);

        const name = document.getElementById("name").value;
        const email = document.getElementById("email").value;

        const formData = {
            Name: name,
            Email: email
        };


        
        fetch("/Home/JavaScriptForm", {
            method: "POST",
            headers: {
                "Content-Type": "application/json" 
            },
            body: JSON.stringify(formData) 
        })
        .then(response => response.json()) 
        .then(data => {
           
            if (data.success) {
                document.getElementById("response-message").innerHTML =
                    `<div class="alert alert-success">${data.message}</div>`;
            } 
            
            else {
                document.getElementById("response-message").innerHTML =
                    `<div class="alert alert-danger">${data.message}</div>`;
            }
        })
        .catch(error => {
            document.getElementById("response-message").innerHTML =
                `<div class="alert alert-danger">An error occurred: ${error}</div>`;
        });
    });
</script>


@* <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
        document.getElementById("studentForm").addEventListener("submit", function (event) {
            event.preventDefault();

            const formData = {
                Name: document.getElementById("name").value,
                Email: document.getElementById("email").value
            };

            axios.post("/Home/JavaScriptForm", formData)
                .then(response => {
                    if (response.data.success) {
                        document.getElementById("response-message").innerHTML =
                            `<div class="alert alert-success">${response.data.message}</div>`;
                    } 
                    
                    else {
                        document.getElementById("response-message").innerHTML =
                            `<div class="alert alert-danger">${response.data.message}</div>`;
                    }
                })
                .catch(error => {
                    document.getElementById("response-message").innerHTML =
                        `<div class="alert alert-danger">An error occurred: ${error.message}</div>`;
                });
        });
</script> *@